"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = evalFilterQuery;
const assertions_ts_1 = require("../../utils/assertions.js");
const results_ts_1 = require("../results.js");
const query_ts_1 = __importDefault(require("../visitors/query.js"));
function evalFilterQuery(ctx, item, node) {
    const list = (0, results_ts_1.createNodeList)();
    switch (node.value.type) {
        case "RelQuery":
            (0, query_ts_1.default)(ctx, item.root, item.value, node.value, (value) => {
                list.push(value);
            });
            break;
        case "JsonPathQuery":
            (0, query_ts_1.default)(ctx, item.root, item.root, node.value, (value) => {
                list.push(value);
            });
            break;
        default:
            (0, assertions_ts_1.assertDefinedNodeType)(node.value);
    }
    return list;
}
//# sourceMappingURL=filter-query.js.map