"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.query = query;
exports.paths = paths;
exports.exec = exec;
exports.batchExec = batchExec;
const exec_ts_1 = __importDefault(require("./core/exec.js"));
const path_ts_1 = require("./core/path.js");
const DEFAULT_OPTIONS = {
    capturePaths: true,
};
function query(input, expression) {
    const values = [];
    (0, exec_ts_1.default)(input, expression, { capturePaths: false }, (value) => {
        values.push(value);
    });
    return values;
}
function paths(input, expression) {
    const paths = [];
    (0, exec_ts_1.default)(input, expression, DEFAULT_OPTIONS, (_, path) => {
        paths.push((0, path_ts_1.toNormalizedPath)(path));
    });
    return paths;
}
function exec(input, expression, cb) {
    (0, exec_ts_1.default)(input, expression, DEFAULT_OPTIONS, cb);
}
function batchExec(input, expressionToCallback, errorCallback) {
    for (const [expression, cb] of expressionToCallback) {
        try {
            exec(input, expression, cb);
        }
        catch (e) {
            errorCallback?.(e instanceof Error ? e : new Error(String(e)), expression);
        }
    }
}
//# sourceMappingURL=index.js.map